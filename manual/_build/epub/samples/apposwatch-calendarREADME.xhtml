<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" xmlns:epub="http://www.idpf.org/2007/ops">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Calendar oswatch</title>
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/epub.css" type="text/css" /> 
  </head><body>

    <div class="document">
      <div class="documentwrapper">
          <div class="body" role="main">
            
  <div class="section" id="calendar-oswatch">
<span id="oswatch"></span><h1>Calendar oswatch</h1>
<div class="section" id="overview">
<h2>Overview</h2>
<p>Once the timer is started (2nd screen); the alarmtime is displayed on the first screen.</p>
<p>Now that we have a way to get data in/out of the watch, we can start to use it.
This timer corresponds to the timer1 parameter, which can be set with a bluetoothconnection.</p>
<p>Once the alarm expires, a message is display on the serial port. (This can be replaced by a vibrating motor)</p>
</div>
<div class="section" id="button-clicking">
<h2>Button clicking</h2>
<p>in the native_posix_64 version : long press switches screens. In the second screen, timer can be started by short clicks.
(2 times with some waiting in between). Short click means briefly clicking, otherwise it is interpreted as a double click.</p>
<p>In the code is defined for each board the clicking threshold. You can adapt this to your taste.</p>
</div>
<div class="section" id="samples">
<h2>Samples</h2>
<p>This chunk of code is an extension on oswatch-bt. (exchanging data)</p>
<p>Smaller chunks of code can be found under samples. They can be run individually and can help explain/test some features.</p>
</div>
<div class="section" id="requirements">
<h2>Requirements</h2>
<p>Bluetooth/gatt server only needed if you want to change the timer1 value.</p>
<p>A bluetooth gatt server. (example taken from bluez)
This can also be a smartphone.</p>
<p>Included is a python-script :  gatt-cts-bt-server.py, for use with bluez on linux.</p>
<p>The timer-parameters are hardcoded in the python script, for testing purposes. (can be modified, of course)</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python3</span>  <span class="n">gatt</span><span class="o">-</span><span class="n">cts</span><span class="o">-</span><span class="n">bt</span><span class="o">-</span><span class="n">server</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
<p>you need to connect to the watch in order, to have it read the time.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">bluetoothctl</span>
<span class="n">scan</span> <span class="n">on</span> <span class="p">(</span><span class="n">gets</span> <span class="n">you</span> <span class="nb">list</span> <span class="n">of</span> <span class="n">bluetoothdevices</span><span class="p">)</span>
<span class="n">connect</span> <span class="n">D5</span><span class="p">:</span><span class="n">A0</span><span class="p">:</span><span class="n">A2</span><span class="p">:</span><span class="mi">6</span><span class="n">D</span><span class="p">:</span><span class="n">A0</span><span class="p">:</span><span class="n">D5</span> <span class="p">(</span><span class="n">pick</span> <span class="n">the</span> <span class="n">pinetime</span> <span class="o">-</span> <span class="n">macaddress</span><span class="p">)</span>
</pre></div>
</div>
<p>A few python scripts have been provided : scan+notification and scan+connect.</p>
</div>
<div class="section" id="building-and-running">
<h2>Building and Running</h2>
<p>west build -p -b  pinetime_devkit1 oswatch-calendar</p>
</div>
<div class="section" id="references">
<h2>References</h2>
</div>
</div>


            <div class="clearer"></div>
          </div>
      </div>
      <div class="clearer"></div>
    </div>
  </body>
</html>